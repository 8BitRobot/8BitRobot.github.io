<!DOCTYPE html>
<html>
    <head>
        <title>Premkumar Giridhar</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/global.css">
        <link rel="stylesheet" href="css/index.css">
    </head>
    <body>
        <header>
            <div>
                <h1><a href="/">Premkumar<span> Giridhar</span></a></h1>
            </div>
            <div>
                <a href="/">Home</a>
                <a href="/resume.html">Resume</a>
                <a href="/projects.html">Projects</a>
            </div>
            <div id="menu-icon" onclick="toggleMobileMenu()">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </header>
        <div id="mobile-nav">
            <a href="/">Home</a>
            <a href="/resume.html">Resume</a>
            <a href="/projects.html">Projects</a>
        </div>
        <main>
            <section id="greeting">
                <div>
                </div>
                <div>
                    <h2>Hello!</h2>
                    <h3>I'm Premkumar.</h3>
                    <p>I'm a first-year student at UCLA, a passionate developer, and a programming mentor.</p>
                    <p>My code helps others in a variety of fields, from education to health and public awareness.</p>
                    <p>I'm interested in computer science, aeronautics, and linguistics. I'm a Computer Science major.</p>
                </div>
            </section>
            <script>
                let toggleMobileMenu = function () {
                    document.querySelector("#menu-icon").classList.toggle("show");
                    document.querySelector("#mobile-nav").classList.toggle("show");
                }

                let sendData = async function (name, email, message) {

                    let response = await fetch(`https://script.google.com/macros/s/AKfycbww9-3T06iChmDoVHKtkPsGfz7ayo4Chm47L0NAhkv5xfR-Um0/exec?name=${name}&email=${email}&message=${message}`, {
                        method: "GET",
                        mode: "cors",
                    });
                    return response.json();
                }

                let submitForm = function () {
                    let name = document.getElementsByName("contact-name")[0].value;
                    let email = document.getElementsByName("contact-email")[0].value;
                    let message = document.getElementsByName("contact-message")[0].value;
                    let errorText = document.getElementById("contact-form-error");
                    let emailValidRegex = /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/g
                    // regex taken from online
                    if (name.length <= 0 || email.length <= 0 || message.length <= 0) {
                        errorText.classList.remove("success");
                        errorText.innerText = "You can't leave any fields blank."
                    } else if (!email.match(emailValidRegex)) {
                        errorText.classList.remove("success");
                        errorText.innerText = "That email address isn't valid."
                    } else {
                        sendData(encodeURIComponent(name), encodeURIComponent(email), encodeURIComponent(message)).then((res) => {
                            if (res.result === "success") {
                                errorText.classList.add("success");
                                errorText.innerText = "Thanks for reaching out!";
                            } else {
                                errorText.classList.remove("success");
                                errorText.innerText = "That didn't work. Please try again later.";
                            }
                        });
                    }
                }

            </script>
            <section id="contact">
                <div>
                    <h3>Contact me</h3>
                    <form id="contact-form" action="javascript:;">
                        <div>
                            <input name="contact-name" placeholder="Name">
                            <input name="contact-email" placeholder="Email">
                        </div>
                        <textarea name="contact-message" placeholder="Message"></textarea>
                        <button onclick="submitForm()">Submit</button>
                        <span id="contact-form-error"></span>
                    </form>
                </div>
                <div>
                    <h3>Find me on...</h3>
                    <p>
                        <a href="https://www.linkedin.com/in/premkumar-giridhar-2334701a0/">
                            <img src="/img/socials/linkedin.svg">
                            <span>Linkedin</span>
                        </a>
                    </p>
                    <p>
                        <a href="https://www.github.com/8BitRobot">
                            <img src="/img/socials/github.png">
                            <span>GitHub</span>
                        </a>
                    </p>
                </div>
            </section>
        </main>
    </body>
</html>